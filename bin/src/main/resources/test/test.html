<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì§ì›/ë¶€ì„œ/ê·¼íƒœ ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./css/style.css">

</head>

<body>

    <div class="container">

        <!-- 1. ì¢Œì¸¡ ë„¤ë¹„ê²Œì´ì…˜ (ë©”ë‰´) -->
        <nav class="sidebar">
            <h2>ğŸ¢ ê´€ë¦¬ ì‹œìŠ¤í…œ</h2>
            <ul>
                <li><a href="#main">ë©”ì¸ í˜ì´ì§€</a></li>
                <li class="active"><a href="#employee">ì§ì› ê´€ë¦¬</a></li> <!-- í˜„ì¬ í˜ì´ì§€ í™œì„±í™” -->
                <li><a href="#department">ë¶€ì„œ ê´€ë¦¬</a></li>
                <li><a href="#attendance">ê·¼íƒœ ê´€ë¦¬</a></li>
            </ul>
        </nav>

        <!-- 2. ë©”ì¸ ì»¨í…ì¸  ì˜ì—­ -->
        <div class="main-content">

            <!-- 2-1. ìƒë‹¨ í—¤ë” -->
            <header class="header">
                <h1>ì§ì› ê´€ë¦¬ í˜ì´ì§€</h1>
                <div class="user-info">
                    <span>ğŸ‘¤ í™ê¸¸ë™ ê´€ë¦¬ìë‹˜</span>
                    <button type="button" title="ì•Œë¦¼">ğŸ””</button>
                    <button type="button" title="ë¡œê·¸ì•„ì›ƒ">ğŸšª ë¡œê·¸ì•„ì›ƒ</button>
                </div>
            </header>

            <!-- 2-2. í˜ì´ì§€ ë‚´ìš©: ì§ì› ëª©ë¡ ë° ì»¨íŠ¸ë¡¤ -->
            <main class="page-content">

                <div class="control-panel">
                    <div class="search-group">
                        <input type="text" id="search-input" placeholder="ì´ë¦„ ë˜ëŠ” ë¶€ì„œëª…ìœ¼ë¡œ ê²€ìƒ‰">
                        <button type="button" onclick="searchEmployees()">ê²€ìƒ‰</button>
                    </div>
                    <button type="button" class="add-btn" onclick="openModal('register')">
                        âœ¨ + ìƒˆ ì§ì› ë“±ë¡
                    </button>
                </div>

                <div class="data-table">
                    <table>
                        <thead>
                            <tr>
                                <th>No.</th>
                                <th>ì´ë¦„</th>
                                <th>ë¶€ì„œëª… (JOIN)</th>
                                <th>ì§ê¸‰</th>
                                <th>ì…ì‚¬ì¼</th>
                                <th>ê´€ë¦¬</th>
                            </tr>
                        </thead>
                        <tbody id="employee-list-body">
                            <!-- ìƒ˜í”Œ ë°ì´í„°: ë¶€ì„œ íƒœê·¸ ìƒ‰ìƒë„ í†¤ë‹¤ìš´ëœ íŒ”ë ˆíŠ¸ì— ë§ê²Œ ì¡°ì •ë¨ -->
                            <tr>
                                <td>1</td>
                                <td>ê¹€ì² ìˆ˜</td>
                                <td><span class="department-tag"
                                        style="background-color: #f8e1b1; color: #7f5c24;">ê°œë°œíŒ€</span></td>
                                <td>ì£¼ì„</td>
                                <td>2023-03-01</td>
                                <td>
                                    <button type="button" class="action-btn btn-detail" onclick="viewDetails(1)">ìƒì„¸</button>
                                    <button type="button" class="action-btn btn-edit" onclick="openModal('edit', 1)">ìˆ˜ì •</button>
                                    <button type="button" class="action-btn btn-delete" onclick="confirmDelete(1)">ì‚­ì œ</button>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>ì´ì˜í¬</td>
                                <td><span class="department-tag"
                                        style="background-color: #d4efdf; color: #1e8449;">ì˜ì—…íŒ€</span></td>
                                <td>ëŒ€ë¦¬</td>
                                <td>2022-08-15</td>
                                <td>
                                    <button type="button" class="action-btn btn-detail" onclick="viewDetails(2)">ìƒì„¸</button>
                                    <button type="button" class="action-btn btn-edit" onclick="openModal('edit', 2)">ìˆ˜ì •</button>
                                    <button type="button" class="action-btn btn-delete" onclick="confirmDelete(2)">ì‚­ì œ</button>
                                </td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>ë°•ë¯¼ì¤€</td>
                                <td><span class="department-tag"
                                        style="background-color: #a9d3f8; color: #2980b9;">ê²½ì˜ì§€ì›íŒ€</span></td>
                                <td>ì‚¬ì›</td>
                                <td>2024-01-20</td>
                                <td>
                                    <button type="button" class="action-btn btn-detail" onclick="viewDetails(3)">ìƒì„¸</button>
                                    <button type="button" class="action-btn btn-edit" onclick="openModal('edit', 3)">ìˆ˜ì •</button>
                                    <button type="button" class="action-btn btn-delete" onclick="confirmDelete(3)">ì‚­ì œ</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
                <div class="pagination">
                    <button type="button">&laquo;</button>
                    <button type="button" class="active">1</button>
                    <button type="button">2</button>
                    <button type="button">3</button>
                    <button type="button">&raquo;</button>
                </div>

            </main>
        </div>

    </div>

    <!-- 3. ì§ì› ë“±ë¡/ìˆ˜ì • ëª¨ë‹¬ -->
    <div id="employeeModal" class="modal-overlay" onclick="closeModal(event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <h3 id="modalTitle">ì§ì› ë“±ë¡</h3>
            <form id="employeeForm">
                <input type="hidden" id="employeeId" name="id">

                <label for="name">ì´ë¦„ *</label>
                <input type="text" id="name" name="name" required>

                <label for="department">ë¶€ì„œ *</label>
                <select id="department" name="department" required>
                    <option value="">-- ë¶€ì„œ ì„ íƒ --</option>
                    <option value="ê°œë°œíŒ€">ê°œë°œíŒ€</option>
                    <option value="ì˜ì—…íŒ€">ì˜ì—…íŒ€</option>
                    <option value="ê²½ì˜ì§€ì›íŒ€">ê²½ì˜ì§€ì›íŒ€</option>
                    <!-- ë¶€ì„œê´€ë¦¬ì—ì„œ ë¶ˆëŸ¬ì˜¬ ë°ì´í„° -->
                </select>

                <label for="position">ì§ê¸‰ *</label>
                <input type="text" id="position" name="position" required>

                <label for="hireDate">ì…ì‚¬ì¼ *</label>
                <input type="date" id="hireDate" name="hireDate" required>

                <label for="email">ì´ë©”ì¼</label>
                <input type="text" id="email" name="email">

                <div class="modal-actions">
                    <button type="button" class="btn-cancel" onclick="closeModal()">ì·¨ì†Œ</button>
                    <button type="submit" class="btn-save">ì €ì¥</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 4. ì§ì› ìƒì„¸ ì •ë³´ ëª¨ë‹¬ (ìƒˆë¡œ ì¶”ê°€ë¨) -->
    <div id="detailModal" class="modal-overlay" onclick="closeDetailModal(event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <h3 id="detailModalTitle">ì§ì› ìƒì„¸ ì •ë³´</h3>
            <div id="employeeDetailContent">
                <!-- ìƒì„¸ ì •ë³´ê°€ ì—¬ê¸°ì— ì‚½ì…ë©ë‹ˆë‹¤. -->
                <p style="text-align: center; color: #777;">ì§ì› IDì— ë”°ë¥¸ ìƒì„¸ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
            </div>
            <div class="modal-actions" style="text-align: center;">
                <button type="button" class="btn-cancel" onclick="closeDetailModal()">ë‹«ê¸°</button>
            </div>
        </div>
    </div>

    <!-- 5. ì»¤ìŠ¤í…€ ì‚­ì œ í™•ì¸ ë©”ì‹œì§€ ë°•ìŠ¤ -->
    <div id="deleteConfirmAlert" class="custom-alert" style="display: none;">
        <p>ì •ë§ë¡œ ì´ ì§ì›ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
        <div class="alert-actions">
            <button type="button" class="btn-cancel" onclick="hideAlert()">ì·¨ì†Œ</button>
            <button type="button" class="btn-delete" onclick="deleteEmployee()">ì‚­ì œ</button>
        </div>
    </div>


    <script>
        // í˜„ì¬ ì‚­ì œ ëŒ€ìƒ IDë¥¼ ì €ì¥í•˜ëŠ” ë³€ìˆ˜
        let currentEmployeeIdToDelete = null;

        // ëª©ì—…(Mock) ì§ì› ë°ì´í„° - ì‹¤ì œ DB ì—°ê²° ì‹œ ì´ ë¶€ë¶„ì€ ëŒ€ì²´ë©ë‹ˆë‹¤.
        const mockEmployees = {
            1: {
                name: "ê¹€ì² ìˆ˜", department: "ê°œë°œíŒ€", position: "ì£¼ì„", hireDate: "2023-03-01", email: "cs.kim@corp.com",
                employeeNo: "E0001", gender: "ë‚¨ì„±", dob: "1995-05-10", address: "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123", lastAppointmentDate: "2024-03-01"
            },
            2: {
                name: "ì´ì˜í¬", department: "ì˜ì—…íŒ€", position: "ëŒ€ë¦¬", hireDate: "2022-08-15", email: "yh.lee@corp.com",
                employeeNo: "E0002", gender: "ì—¬ì„±", dob: "1998-11-20", address: "ê²½ê¸°ë„ ì„±ë‚¨ì‹œ ë¶„ë‹¹êµ¬ íŒêµë¡œ 456", lastAppointmentDate: "2023-08-15"
            },
            3: {
                name: "ë°•ë¯¼ì¤€", department: "ê²½ì˜ì§€ì›íŒ€", position: "ì‚¬ì›", hireDate: "2024-01-20", email: "mj.park@corp.com",
                employeeNo: "E0003", gender: "ë‚¨ì„±", dob: "2000-01-05", address: "ì¸ì²œê´‘ì—­ì‹œ ì—°ìˆ˜êµ¬ ì†¡ë„ë™ 789", lastAppointmentDate: "2024-01-20"
            }
        };


        // -------------------------
        // ëª¨ë‹¬ ë° UI ê´€ë ¨ í•¨ìˆ˜
        // -------------------------

        /**
         * ì§ì› ë“±ë¡/ìˆ˜ì • ëª¨ë‹¬ì„ ë‹«ìŠµë‹ˆë‹¤.
         * @param {Event} event í´ë¦­ ì´ë²¤íŠ¸ (ëª¨ë‹¬ ì˜¤ë²„ë ˆì´ í´ë¦­ ë°©ì§€ìš©)
         */
        function closeModal(event) {
            // ì˜¤ë²„ë ˆì´ê°€ ì•„ë‹Œ ëª¨ë‹¬ ì»¨í…ì¸ ë¥¼ í´ë¦­í–ˆì„ ë•ŒëŠ” ë‹«íˆì§€ ì•Šë„ë¡ ë°©ì§€
            if (event && event.target.id !== 'employeeModal') {
                return;
            }
            document.getElementById('employeeModal').style.display = 'none';
        }

        /**
         * ìƒì„¸ ì •ë³´ ëª¨ë‹¬ì„ ë‹«ìŠµë‹ˆë‹¤.
         * @param {Event} event í´ë¦­ ì´ë²¤íŠ¸ (ëª¨ë‹¬ ì˜¤ë²„ë ˆì´ í´ë¦­ ë°©ì§€ìš©)
         */
        function closeDetailModal(event) {
            if (event && event.target.id !== 'detailModal') {
                return;
            }
            document.getElementById('detailModal').style.display = 'none';
        }

        /**
         * ì§ì› ë“±ë¡/ìˆ˜ì • ëª¨ë‹¬ì„ ì—´ê³  ëª¨ë“œë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. (ê¸°ì¡´ í•¨ìˆ˜)
         * @param {string} mode 'register' ë˜ëŠ” 'edit'
         * @param {number} id ìˆ˜ì •í•  ê²½ìš° ì§ì› ID
         */
        function openModal(mode, id = null) {
            const modal = document.getElementById('employeeModal');
            const form = document.getElementById('employeeForm');
            const title = document.getElementById('modalTitle');

            form.reset();
            document.getElementById('employeeId').value = '';

            if (mode === 'register') {
                title.textContent = 'ì§ì› ë“±ë¡';
            } else if (mode === 'edit' && id !== null) {
                title.textContent = 'ì§ì› ì •ë³´ ìˆ˜ì • (ID: ' + id + ')';
                document.getElementById('employeeId').value = id;

                // ì„ì‹œ ë°ì´í„° ì±„ìš°ê¸° (mockEmployees ì‚¬ìš©)
                const employee = mockEmployees[id];
                if (employee) {
                    document.getElementById('name').value = employee.name;
                    document.getElementById('department').value = employee.department;
                    document.getElementById('position').value = employee.position;
                    document.getElementById('hireDate').value = employee.hireDate;
                    document.getElementById('email').value = employee.email;
                }
            }
            modal.style.display = 'flex';
        }


        // -------------------------
        // CRUD ê´€ë ¨ í•¨ìˆ˜ (Placeholder)
        // -------------------------

        /**
         * ìƒì„¸ ë³´ê¸° ëª¨ë‹¬ì„ ì—´ê³  ì •ë³´ë¥¼ ì±„ì›ë‹ˆë‹¤. (ì—…ë°ì´íŠ¸ëœ í•¨ìˆ˜)
         * @param {number} id ìƒì„¸ ì •ë³´ë¥¼ ë³¼ ì§ì› ID
         */
        function viewDetails(id) {
            const employee = mockEmployees[id];
            const detailContent = document.getElementById('employeeDetailContent');

            if (!employee) {
                detailContent.innerHTML = '<p style="color: red;">ì§ì› IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>';
                document.getElementById('detailModalTitle').textContent = 'ì˜¤ë¥˜';
            } else {
                document.getElementById('detailModalTitle').textContent = `[${employee.department}] ${employee.name} ì§ì› ìƒì„¸ ì •ë³´`;

                detailContent.innerHTML = `
                    <div class="detail-item"><div class="detail-label">ì‚¬ë²ˆ</div><div class="detail-value">${employee.employeeNo}</div></div>
                    <div class="detail-item"><div class="detail-label">ì´ë¦„</div><div class="detail-value">${employee.name}</div></div>
                    <div class="detail-item"><div class="detail-label">ì„±ë³„</div><div class="detail-value">${employee.gender}</div></div>
                    <div class="detail-item"><div class="detail-label">ìƒë…„ì›”ì¼</div><div class="detail-value">${employee.dob}</div></div>
                    <div class="detail-item"><div class="detail-label">ì§ê¸‰/ë¶€ì„œ</div><div class="detail-value">${employee.position} (${employee.department})</div></div>
                    <div class="detail-item"><div class="detail-label">ì…ì‚¬ì¼</div><div class="detail-value">${employee.hireDate}</div></div>
                    <div class="detail-item"><div class="detail-label">ìµœì¢…ë°œë ¹ì¼</div><div class="detail-value">${employee.lastAppointmentDate}</div></div>
                    <div class="detail-item"><div class="detail-label">ì´ë©”ì¼</div><div class="detail-value">${employee.email}</div></div>
                    <div class="detail-item"><div class="detail-label">ì£¼ì†Œ</div><div class="detail-value">${employee.address}</div></div>
                `;
            }

            document.getElementById('detailModal').style.display = 'flex';
        }


        // í¼ ì œì¶œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
        document.getElementById('employeeForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const id = document.getElementById('employeeId').value;

            if (id) {
                console.log('ì§ì› ì •ë³´ ìˆ˜ì •:', id, new FormData(this));
                // TODO: DB ìˆ˜ì • ë° ëª©ë¡ ê°±ì‹  ë¡œì§ ì¶”ê°€
            } else {
                console.log('ìƒˆ ì§ì› ë“±ë¡:', new FormData(this));
                // TODO: DB ë“±ë¡ ë° ëª©ë¡ ê°±ì‹  ë¡œì§ ì¶”ê°€
            }
            closeModal();
            console.log("ì €ì¥ ì‘ì—… ì™„ë£Œ. í™”ë©´ ê°±ì‹  í•„ìš”.");
        });


        // ê²€ìƒ‰ ê¸°ëŠ¥ (Search)
        function searchEmployees() {
            const query = document.getElementById('search-input').value;
            console.log('ê²€ìƒ‰ ì¿¼ë¦¬:', query);
            // TODO: DB ì¡°íšŒ ë° í…Œì´ë¸” í•„í„°ë§ ë¡œì§
        }

        // ì‚­ì œ í™•ì¸ ì°½ í‘œì‹œ
        function confirmDelete(id) {
            currentEmployeeIdToDelete = id;
            document.getElementById('deleteConfirmAlert').style.display = 'block';
        }

        // ì‚­ì œ í™•ì¸ ì°½ ìˆ¨ê¸°ê¸°
        function hideAlert() {
            document.getElementById('deleteConfirmAlert').style.display = 'none';
            currentEmployeeIdToDelete = null;
        }

        // ì‹¤ì œ ì‚­ì œ ë¡œì§ (Delete)
        function deleteEmployee() {
            if (currentEmployeeIdToDelete !== null) {
                console.log('ì§ì› ID ì‚­ì œ:', currentEmployeeIdToDelete);
                // TODO: ì‹¤ì œ DB DELETE ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ëŠ” ë¡œì§ì´ í•„ìš”í•©ë‹ˆë‹¤.

                // ì‚­ì œ í›„ UI ê°±ì‹  ë¡œì§ í•„ìš”
                hideAlert();
                console.log("ì‚­ì œ ì‘ì—… ì™„ë£Œ. í™”ë©´ ê°±ì‹  í•„ìš”.");
            }
        }
    </script>
</body>

</html>