<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.repository.BoardDAO">

	<select id="getNoticeBoardList" resultType="NoticeBoardVO" parameterType="int">
		SELECT
			NOTICE_NO,
			EMP_NO,
			NOTICE_DATE,
			NOTICE_TITLE,
			NOTICE_CNT,
			NOTICE_WRITER,
			DEPT_NO
		FROM
			NOTICE_BOARD
		WHERE 
			DEPT_NO = 0 OR DEPT_NO = #{deptNo}
		ORDER BY
			NOTICE_NO DESC
	</select>

	<insert id="insertNoticeBoard" parameterType="NoticeBoardVO">
		INSERT INTO
		NOTICE_BOARD
		(
			NOTICE_NO,
			EMP_NO,
			NOTICE_CONTENT,
			NOTICE_DATE,
			NOTICE_TITLE,
			NOTICE_CNT,
			NOTICE_WRITER,
			DEPT_NO
		)
		VALUES
		(
			NOTICE_NO_SEQ.NEXTVAL ,
			#{empNo} ,
			#{noticeContent},
			SYSDATE,
			#{noticeTitle},
			0,
			#{noticeWriter},
			#{deptNo}
		)
	</insert>

	<update id="updateNoticeBoard" parameterType="NoticeBoardVO">
		UPDATE NOTICE_BOARD
		SET
			NOTICE_TITLE = #{noticeTitle},
			NOTICE_CONTENT = #{noticeContent},
			DEPT_NO = #{deptNo}
		WHERE NOTICE_NO = #{noticeNo}
	</update>

	<select id="getContentNoticeBoard" resultType="NoticeBoardVO">
		SELECT *
		FROM
		NOTICE_BOARD
		WHERE NOTICE_NO = #{noticeNo}
	</select>

	<select id="getFreeBoardList" resultType="FreeBoardVO" parameterType="int">
		SELECT
			BOARD_NO,
			EMP_NO,
			BOARD_DATE,
			BOARD_TITLE,
			BOARD_CNT,
			BOARD_WRITER,
			DEPT_NO
		FROM
			FREE_BOARD
		WHERE 
			DEPT_NO = 0 OR DEPT_NO = #{deptNo}
		ORDER BY
			BOARD_NO DESC
	</select>
	
	<insert id="insertFreeBoard" parameterType="FreeBoardVO">
		INSERT INTO
		FREE_BOARD
		(
			BOARD_NO,
			EMP_NO,
			BOARD_CONTENT,
			BOARD_DATE,
			BOARD_TITLE,
			BOARD_CNT,
			BOARD_WRITER,
			DEPT_NO
		)
		VALUES
		(
			BOARD_NO_SEQ.NEXTVAL ,
			#{empNo} ,
			#{boardContent},
			SYSDATE,
			#{boardTitle},
			0,
			#{boardWriter},
			#{deptNo}
		)
	</insert>

	<update id="updateFreeBoard" parameterType="FreeBoardVO">
		UPDATE FREE_BOARD
		SET
			BOARD_TITLE = #{boardTitle},
			BOARD_CONTENT = #{boardContent},
			DEPT_NO = #{deptNo}
		WHERE
			BOARD_NO = #{boardNo}
	</update>
	
	<select id="getContentFreeBoard" resultType="FreeBoardVO"
		parameterType="string">
		SELECT *
		FROM
		FREE_BOARD
		WHERE BOARD_NO = #{boardNo}
	</select>


	<update id="updateNoticeCnt" parameterType="string">
		UPDATE NOTICE_BOARD
		SET
		NOTICE_CNT = NOTICE_CNT + 1
		WHERE NOTICE_NO = #{noticeNo}
	</update>
	<update id="updateFreeBoardCnt" parameterType="string">
		UPDATE FREE_BOARD
		SET
		BOARD_CNT = BOARD_CNT + 1
		WHERE BOARD_NO = #{boardNo}
	</update>

</mapper>