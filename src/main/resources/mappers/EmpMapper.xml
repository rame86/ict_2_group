<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.repository.EmpMapper">

    <!-- 사원목록 전체 조회 (사원관리·급여관리 공용) -->
    <select id="selectEmpList" resultType="com.example.domain.EmpVO">
        SELECT
            e.EMP_NO      AS empNo,
            e.EMP_NAME    AS empName,
            e.GRADE_NO    AS gradeNo,

            e.STATUS_NO   AS statusNo,
            CASE e.STATUS_NO
                WHEN 0 THEN '퇴직'
                WHEN 1 THEN '재직'
                WHEN 2 THEN '휴직(자발적)'
                WHEN 3 THEN '휴직(병가 등 복지)'
                WHEN 4 THEN '대기'
                WHEN 5 THEN '징계'
                WHEN 6 THEN '인턴/수습'
                WHEN 7 THEN '파견'
                ELSE '기타'
            END AS statusName,

            e.EMP_PHONE    AS empPhone,
            e.EMP_REGDATE  AS empRegdate,

            d.DEPT_NAME    AS deptName

        FROM EMP e
        LEFT JOIN DEPT d ON e.DEPT_NO = d.DEPT_NO
        ORDER BY e.EMP_NO ASC
    </select>

    <!-- 사원 상세 조회 -->
    <select id="getEmp" parameterType="String" resultType="com.example.domain.EmpVO">
        SELECT *
        FROM EMP
        WHERE EMP_NO = #{empNo}
    </select>

</mapper>
